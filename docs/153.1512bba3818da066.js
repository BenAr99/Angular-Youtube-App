"use strict";(self.webpackChunkyoutube_client_app=self.webpackChunkyoutube_client_app||[]).push([[153],{9153:(nt,y,a)=>{a.r(y),a.d(y,{YoutubeModule:()=>et});var u=a(6814),f=a(9862),l=a(95),e=a(4946);let w=(()=>{class n{transform(t,i){return i?t.filter(s=>s.snippet.title.toLowerCase().includes(i.toLowerCase())):[]}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275pipe=e.Yjl({name:"filterVideo",type:n,pure:!0})}return n})(),T=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({providers:[w],imports:[u.ez]})}return n})();var x=a(4631),v=a(9310),S=a(7394);class M extends S.w0{constructor(r,t){super()}schedule(r,t=0){return this}}const g={setInterval(n,r,...t){const{delegate:i}=g;return i?.setInterval?i.setInterval(n,r,...t):setInterval(n,r,...t)},clearInterval(n){const{delegate:r}=g;return(r?.clearInterval||clearInterval)(n)},delegate:void 0};var U=a(9039);const b={now:()=>(b.delegate||Date).now(),delegate:void 0};class m{constructor(r,t=m.now){this.schedulerActionCtor=r,this.now=t}schedule(r,t=0,i){return new this.schedulerActionCtor(this,r).schedule(i,t)}}m.now=b.now;const N=new class L extends m{constructor(r,t=m.now){super(r,t),this.actions=[],this._active=!1}flush(r){const{actions:t}=this;if(this._active)return void t.push(r);let i;this._active=!0;do{if(i=r.execute(r.state,r.delay))break}while(r=t.shift());if(this._active=!1,i){for(;r=t.shift();)r.unsubscribe();throw i}}}(class F extends M{constructor(r,t){super(r,t),this.scheduler=r,this.work=t,this.pending=!1}schedule(r,t=0){var i;if(this.closed)return this;this.state=r;const s=this.id,o=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(o,s,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(r,t,i=0){return g.setInterval(r.flush.bind(r,this),i)}recycleAsyncId(r,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&g.clearInterval(t)}execute(r,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(r,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,t){let s,i=!1;try{this.work(r)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:r,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,U.P)(i,this),null!=r&&(this.id=this.recycleAsyncId(t,r,null)),this.delay=null,super.unsubscribe()}}});var J=a(9360),j=a(8251),Y=a(2181),V=a(4664),z=a(7398);let O=(()=>{class n{constructor(t){this.http=t}getVideoList(t){let i=(new f.LE).append("key","").append("type","video").append("part","snippet").append("maxResult","15");return t&&(i=i.append("q",t)),this.http.get(`search?${i}`)}getVideoPreviews(t){const i=t.join(","),s=(new f.LE).append("id",i).append("key","").append("part","snippet").append("part","statistics");return this.http.get(`videos?${s}`)}static#t=this.\u0275fac=function(i){return new(i||n)(e.LFG(f.eN))};static#e=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var E=a(6859),A=a(2490);let Z=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-video-rating-list"]],inputs:{videoCard:"videoCard"},decls:9,vars:3,consts:[["src","assets/icons/viewed.svg","alt","views"],["src","assets/icons/liked.svg","alt","liked"],["src","assets/icons/comment.svg","alt","comments"]],template:function(i,s){1&i&&(e._UZ(0,"img",0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"img",1),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._UZ(6,"img",2),e.TgZ(7,"span"),e._uU(8),e.qZA()),2&i&&(e.xp6(2),e.Oqu(null==s.videoCard?null:s.videoCard.viewCount),e.xp6(3),e.Oqu(null==s.videoCard?null:s.videoCard.likeCount),e.xp6(3),e.Oqu(null==s.videoCard?null:s.videoCard.commentCount))},styles:["[_nghost-%COMP%]{display:flex;width:100%;justify-content:space-evenly;align-items:center}"]})}return n})(),Q=(()=>{class n{constructor(t){this.router=t}navigateToDetailCard(){this.router.navigate([`home/detail/${this.videoCard?.id}`])}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(v.F0))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-video-preview"]],inputs:{videoCard:"videoCard"},decls:7,vars:3,consts:[[1,"main"],["alt","",3,"src"],[3,"videoCard"],[1,"title"],[3,"click"]],template:function(i,s){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"img",1)(2,"app-video-rating-list",2),e.TgZ(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"app-button",4),e.NdJ("click",function(){return s.navigateToDetailCard()}),e._uU(6,"more..."),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("src",null==s.videoCard||null==s.videoCard.snippet||null==s.videoCard.snippet.thumbnails||null==s.videoCard.snippet.thumbnails.medium?null:s.videoCard.snippet.thumbnails.medium.url,e.LSH),e.xp6(1),e.Q6J("videoCard",null==s.videoCard?null:s.videoCard.statistics),e.xp6(2),e.Oqu(null==s.videoCard||null==s.videoCard.snippet?null:s.videoCard.snippet.title))},dependencies:[A.r,Z],styles:["[_nghost-%COMP%]{display:flex;width:243px;padding:20px 21px 15px 19px;margin:15px;border-radius:5px;background:#E5E5E5;border-bottom:5px solid blue;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.title[_ngcontent-%COMP%]{min-height:115px;color:#4f4f4f;text-align:right;font-size:20px;font-weight:700;margin-top:21px}img[_ngcontent-%COMP%]{width:223px;height:123px;margin-bottom:21px}"]})}return n})();var c=function(n){return n[n.sixMonths=15552e6]="sixMonths",n[n.oneMonths=2592e6]="oneMonths",n[n.sevenDays=6048e5]="sevenDays",n}(c||{});let P=(()=>{class n{constructor(){this.borderBottom="none",this.todayDate=new Date}ngOnChanges(){this.dateVideo&&this.colorDetection(this.todayDate.getTime()-this.dateVideo.getTime())}colorDetection(t){c.sixMonths<t&&(this.borderBottom="5px solid red"),c.oneMonths<t&&t<c.sixMonths&&(this.borderBottom="5px solid orange"),c.sevenDays<t&&t<c.oneMonths&&(this.borderBottom="5px solid green"),c.sevenDays>t&&(this.borderBottom="5px solid blue")}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275dir=e.lG2({type:n,selectors:[["","appSortColor",""]],hostVars:2,hostBindings:function(i,s){2&i&&e.Udp("border-bottom",s.borderBottom)},inputs:{dateVideo:"dateVideo"},standalone:!0,features:[e.TTD]})}return n})(),X=(()=>{class n{constructor(t){this.filterVideoPipe=t}transform(t,i){let s=[...t];if(s&&s.length){let o=0;return void 0!==i&&Object.values(i).forEach(d=>{if(void 0!==i){const p=Object.keys(i);("date"===p[o]||"countOfViews"===p[o])&&this.sortDateOfView(s,d,p[o]),"wordOrSentance"===p[o]&&(s=this.sortByWord(s,d)),o+=1}}),s}return[]}sortDateOfView(t,i,s){switch(i){case"notIncluded":default:return t;case"desc":return t.sort((o,d)=>Number(this.pathVideoDate(o,d,s)[1])-Number(this.pathVideoDate(o,d,s)[0]));case"asc":return t.sort((o,d)=>Number(this.pathVideoDate(o,d,s)[0])-Number(this.pathVideoDate(o,d,s)[1]))}}sortByWord(t,i){return i?this.filterVideoPipe.transform(t,i):t}pathVideoDate(t,i,s){return"date"===s?[t.snippet.publishedAt.getTime(),i.snippet.publishedAt.getTime()]:"countOfViews"===s?[t.statistics.viewCount,i.statistics.viewCount]:[]}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(w,16))};static#e=this.\u0275pipe=e.Yjl({name:"sortVideoData",type:n,pure:!0})}return n})();function R(n,r){if(1&n&&e._UZ(0,"app-video-preview",1),2&n){const t=r.$implicit;e.Q6J("videoCard",t)("dateVideo",t.snippet.publishedAt)}}let $=(()=>{class n{constructor(t,i){this.dataService=t,this.filterChangeService=i,this.videoData=[]}ngOnInit(){this.filterChangeService.sortValueSubject.subscribe({next:t=>{this.sortValue=t}}),this.filterChangeService.searchValueSubject.pipe(function B(n,r=N){return(0,J.e)((t,i)=>{let s=null,o=null,d=null;const p=()=>{if(s){s.unsubscribe(),s=null;const h=o;o=null,i.next(h)}};function it(){const h=d+n,I=r.now();if(I<h)return s=this.schedule(void 0,h-I),void i.add(s);p()}t.subscribe((0,j.x)(i,h=>{o=h,d=r.now(),s||(s=r.schedule(it,n),i.add(s))},()=>{p(),i.complete()},void 0,()=>{o=s=null}))})}(1e3),(0,Y.h)(t=>t.length>=3),(0,V.w)(t=>this.dataService.getVideoList(t)),(0,z.U)(t=>t.map(i=>i.id.videoId)),(0,V.w)(t=>this.dataService.getVideoPreviews(t))).subscribe({next:t=>{this.videoData=t},error:t=>console.error(`\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ${t}`)})}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(O),e.Y36(E.h))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-video-preview-list"]],decls:2,vars:4,consts:[["appSortColor","",3,"videoCard","dateVideo",4,"ngFor","ngForOf"],["appSortColor","",3,"videoCard","dateVideo"]],template:function(i,s){1&i&&(e.YNc(0,R,1,2,"app-video-preview",0),e.ALo(1,"sortVideoData")),2&i&&e.Q6J("ngForOf",e.xi3(1,1,s.videoData,s.sortValue))},dependencies:[u.sg,Q,P,X],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;align-items:center}"]})}return n})(),q=(()=>{class n{constructor(t,i){this.route=t,this.dataService=i}ngOnInit(){this.dataService.getVideoPreviews([String(this.route.snapshot.paramMap.get("id"))]).subscribe(t=>{this.detailCard=t[0],this.date=this.detailCard?.snippet?.publishedAt})}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(v.gz),e.Y36(O))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-detail-video-preview"]],decls:13,vars:9,consts:[["alt","",3,"src"],["appSortColor","",1,"main",3,"dateVideo"],[1,"name-date"],[1,"name"],[1,"date"],[1,"description"],[1,"description-text"],[3,"videoCard"]],template:function(i,s){1&i&&(e._UZ(0,"img",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"span",4),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"p",5),e._uU(9,"Description:"),e.qZA(),e.TgZ(10,"span",6),e._uU(11),e.qZA(),e._UZ(12,"app-video-rating-list",7),e.qZA()),2&i&&(e.Q6J("src",null==s.detailCard||null==s.detailCard.snippet||null==s.detailCard.snippet.thumbnails||null==s.detailCard.snippet.thumbnails.standard?null:s.detailCard.snippet.thumbnails.standard.url,e.LSH),e.xp6(1),e.Q6J("dateVideo",s.date),e.xp6(3),e.Oqu(null==s.detailCard||null==s.detailCard.snippet?null:s.detailCard.snippet.title),e.xp6(2),e.Oqu(e.xi3(7,6,s.date,"fullDate")),e.xp6(5),e.Oqu(null==s.detailCard||null==s.detailCard.snippet?null:s.detailCard.snippet.description),e.xp6(1),e.Q6J("videoCard",null==s.detailCard?null:s.detailCard.statistics))},dependencies:[Z,P,u.uU],styles:["[_nghost-%COMP%]{display:flex;padding:44px 136px 0;justify-content:center}.main[_ngcontent-%COMP%]{display:flex;width:436px;flex-direction:column;height:387px;padding:35px;border-radius:0 5px 5px 0;background:#E5E5E5;box-shadow:5px 5px 20px #33333340}img[_ngcontent-%COMP%]{width:729px;height:461px;border-radius:0 0 0 5px;box-shadow:5px 10px 20px #33333340}.name-date[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:25px}.name[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.description[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.date[_ngcontent-%COMP%]{width:150px;color:#828282;text-align:right;font-size:10px}.description-text[_ngcontent-%COMP%]{color:#828282;font-size:12px}app-video-rating-list[_ngcontent-%COMP%]{position:relative;top:70px}"]})}return n})();function G(n){const r=new Date(n.value).getTime();return(new Date).getTime()-r>0?null:{date:"\u0414\u0430\u0442\u0430 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u0430"}}var C=a(4016),k=a(6535);function D(n,r){return t=>l.kI.maxLength(n)(t)?{maxLength:`${r} \u0438\u043c\u0435\u0435\u0442 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435`}:null}var H=a(7575),W=a(4633),K=a(2444);const _=[{path:"",component:$},{path:"detail/:id",component:q},{path:"createCard",component:(()=>{class n{constructor(){this.createCardForm=this.initForm()}initForm(){return new l.cw({title:new l.NI("",[(0,C.n)("\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),(0,k.O)(3,"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),D(20,"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")]),description:new l.NI("",D(255,"\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435")),img:new l.NI("",(0,C.n)("\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")),video:new l.NI("",(0,C.n)("\u0432\u0438\u0434\u0435\u043e")),date:new l.NI("",[(0,C.n)("\u0434\u0430\u0442\u0443"),G])})}createCard(){this.createCardForm.valid&&console.log("\u043a\u0430\u0440\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043b\u0430\u0441\u044c")}reset(){this.createCardForm.reset()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-card"]],decls:14,vars:1,consts:[[3,"formGroup"],["formControlName","title","id","title"],["formControlName","description","id","description"],["formControlName","img","id","img"],["formControlName","video","id","video"],["formControlName","date","id","date","placeholder","year.month.date"],[1,"block-button"],[3,"click"]],template:function(i,s){1&i&&(e.TgZ(0,"app-card-shell")(1,"app-card-name"),e._uU(2,"Create new card"),e.qZA(),e.TgZ(3,"app-card-form",0),e._UZ(4,"app-input",1)(5,"app-input",2)(6,"app-input",3)(7,"app-input",4)(8,"app-input",5),e.qZA(),e.TgZ(9,"div",6)(10,"app-button",7),e.NdJ("click",function(){return s.reset()}),e._uU(11,"Reset"),e.qZA(),e.TgZ(12,"app-button",7),e.NdJ("click",function(){return s.createCard()}),e._uU(13,"Create card"),e.qZA()()()),2&i&&(e.xp6(3),e.Q6J("formGroup",s.createCardForm))},dependencies:[H.t,A.r,x.a,l.JJ,l.JL,l.sg,l.u,W.J,K.X],styles:["app-card-shell[_ngcontent-%COMP%]{position:absolute;bottom:33%;right:50%}.block-button[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}"]})}return n})()}];let tt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[u.ez,v.Bz.forChild(_),v.Bz]})}return n})(),et=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({providers:[f.eN,u.uU],imports:[u.ez,T,x.a,l.UX,tt]})}return n})()}}]);